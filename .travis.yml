language: node_js
sudo: false

jobs:
  include:
    - stage: Testing dev-toolkit...
      env: Run feature-tests
      script:
        - cd feature-tests
        - npm install
        - npm run test

    - stage: Testing dev-toolkit...
      env: Test bootstrapping the project
      script:
        - npm install
        - npm run bootstrap

    - stage: Testing dev-toolkit...
      env: Lint feature-tests
      script:
        - cd feature-tests
        - npm install --only=dev --ignore-scripts
        - npm run lint

    - stage: Testing dev-toolkit...
      env: Lint packages
      script:
        - cd packages/babel-preset-dev-toolkit
        - npm install --only=dev --ignore-scripts
        - npm run lint
        - cd ../..

        - cd packages/babel-runner
        - npm install --only=dev --ignore-scripts
        - npm run lint
        - cd ../..

        - cd packages/dev-toolkit
        - npm install --only=dev --ignore-scripts
        - npm run lint
        - cd ../..

        - cd packages/eslint-config-dev-toolkit
        - npm install --only=dev --ignore-scripts
        - npm run lint

    - stage: Testing dev-toolkit...
      env: Lint templates
      script:
        - cd templates/standard
        - npm install --only=dev --ignore-scripts
        - npm run lint
        - cd ../..

        - cd templates/minimal
        - npm install --only=dev --ignore-scripts
        - npm run lint
        - cd ../..

        - cd templates/with-sass
        - npm install --only=dev --ignore-scripts
        - npm run lint
        - cd ../..

        - cd templates/serverless
        - npm install --only=dev --ignore-scripts
        - npm run lint
        - cd ../..
